import{R as e,C as t,r as n,W as a,a as o,b as s}from"./vendor.88cba86e.js";var r=[{inputs:[],stateMutability:"payable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"},{indexed:!1,internalType:"string",name:"message",type:"string"}],name:"NewWave",type:"event"},{inputs:[],name:"getAllWaves",outputs:[{components:[{internalType:"address",name:"waver",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"string",name:"message",type:"string"}],internalType:"struct WavePortal.WaveData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalWaves",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_message",type:"string"}],name:"wave",outputs:[],stateMutability:"nonpayable",type:"function"}];function i(){return e.createElement("div",{className:"w-6 h-6 flex items-center justify-center overflow-hidden"},e.createElement(t,{weight:"bold",className:"w-4 h-4 animate-spin"}))}function l(){const[t,s]=n.exports.useState(""),[l,c]=n.exports.useState([]),[m,d]=n.exports.useState(!1),[u,g]=n.exports.useState(""),p="0x6BBA1956a25E56Bb01d44a92F6B3f8DC6ce466FD",f=r,w=async()=>{try{const{ethereum:e}=window;if(e){const t=new a(e).getSigner(),n=new o(p,f,t),s=await n.getAllWaves();console.log(s);let r=[];s.forEach((e=>{r.push({address:e.waver,timestamp:new Date(1e3*e.timestamp),message:e.message})})),c(r)}else console.log("Objeto Ethereum n√£o existe!")}catch(e){console.log(e)}};return n.exports.useEffect((()=>{let e;const t=(e,t,n)=>{console.log("NewWave",e,t,n),c((a=>[...a,{address:e,timestamp:new Date(1e3*t),message:n}]))};if(window.ethereum){const n=new a(window.ethereum).getSigner();e=new o(p,f,n),e.on("NewWave",t)}return()=>{e&&e.off("NewWave",t)}}),[]),n.exports.useEffect((()=>{(async()=>{try{const{ethereum:e}=window;if(!e)return void console.log("Garanta que possui a Metamask instalada!");console.log("Temos o objeto ethereum",e);const t=await e.request({method:"eth_accounts"});if(0!==t.length){const e=t[0];console.log("Encontrada a conta autorizada:",e),s(e),w()}else console.log("Nenhuma conta autorizada foi encontrada")}catch(e){console.log(e)}})()}),[]),e.createElement("div",{className:"mainContainer"},e.createElement("div",{className:"dataContainer"},e.createElement("div",{className:"header"},"üëã Ol√° Pessoal!"),e.createElement("div",{className:"bio"},"Eu sou o msoutto e sou desenvolvedor back end. Estou aprendendo desenvolvimento blockchain, sabia? Legal, n√©? Conecte sua carteira Ethereum wallet e me manda um salve!"),e.createElement("div",{className:"p-4 relative rounded-2xl flex flex-col items-center shadow-lg w-[calc(100vw-2rem)] md:w-auto"},t?e.createElement("form",{className:"my-4 w-full items-center",onSubmit:async e=>{e.preventDefault();try{d(!0);const{ethereum:e}=window;if(e){const t=new a(e).getSigner(),n=new o(p,f,t);let s=await n.getTotalWaves();console.log("Recuperado o n√∫mero de salves...",s.toNumber());const r=await n.wave(u,{gasLimit:3e5});console.log("Minerando...",r.hash),await r.wait(),console.log("Minerado -- ",r.hash),s=await n.getTotalWaves(),console.log("Total de salves recuperado...",s.toNumber()),g("")}else console.log("Objeto Ethereum n√£o encontrado!")}catch(t){console.log(t)}d(!1)}},e.createElement("textarea",{className:"min-w-[304px] w-full min-h-[112px] text-sm placeholder-zinc-400 text-zinc-600 border-zinc-300 bg-transparent rounded-md focus:border-indigo-500 focus:ring-indigo-500 focus:ring-1 focus:outline-none resize-none scrollbar scrollbar-thumb-zinc-700 scrollbar-track-transparent scrollbar-thin",placeholder:"Salve! Que projeto interessante...",onChange:e=>g(e.target.value)}),e.createElement("footer",{className:"flex gap-2 mt-2"},e.createElement("button",{type:"submit",className:"p-2 bg-indigo-600 rounded-md border-transparent flex-1 flex justify-center items-center text-sm text-white hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-zinc-900 focus:ring-brand-500 transition-colors disabled:opacity-70 disabled:hover:bg-indigo-600",disabled:0==u.length||m},m?e.createElement(i,null):"Mandar Salve üåü"))):e.createElement("button",{className:"p-2 bg-indigo-600 rounded-md border-transparent flex-1 flex justify-center items-center text-sm text-white hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-zinc-900 focus:ring-indigo-500 transition-colors disabled:opacity-60 disabled:hover:bg-indigo-500",onClick:async()=>{try{d(!0);const{ethereum:e}=window;if(!e)return void alert("MetaMask n√£o encontrada!");const t=await e.request({method:"eth_requestAccounts"});console.log("Conectado",t[0]),s(t[0])}catch(e){console.log(e)}d(!1)},disabled:m},"Conectar carteira")),l.map(((t,n)=>e.createElement("div",{key:n,style:{backgroundColor:"OldLace",marginTop:"16px",padding:"8px"}},e.createElement("div",null,"Endere√ßo: ",t.address),e.createElement("div",null,"Data/Hor√°rio: ",t.timestamp.toString()),e.createElement("div",null,"Mensagem: ",t.message))))))}s.render(e.createElement(e.StrictMode,null,e.createElement(l,null)),document.getElementById("root"));
